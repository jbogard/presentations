{"Name":"MessagesViewIndex","Version":54003,"Collections":["FailedMessages"],"LockMode":0,"Priority":1,"State":0,"IndexDefinition":{"SourceType":"Documents","LockMode":"Unlock","Priority":"Normal","State":"Normal","OutputReduceToCollection":null,"PatternForOutputReduceToCollectionReferences":null,"PatternReferencesCollectionName":null,"ReduceOutputIndex":null,"DeploymentMode":null,"Name":"MessagesViewIndex","Reduce":null,"Type":"Map","Maps":["docs.FailedMessages.Select(message => new {\n    message = message,\n    last = DynamicEnumerable.LastOrDefault(message.ProcessingAttempts)\n}).Select(this0 => new {\n    MessageId = this0.last.MessageId,\n    MessageType = ((string) this0.last.MessageMetadata[\"MessageType\"]),\n    IsSystemMessage = ((bool) this0.last.MessageMetadata[\"IsSystemMessage\"]),\n    Status = this0.message.Status == 4 ? 5 : (this0.message.Status == 2 ? 4 : (this0.message.ProcessingAttempts.Count == 1 ? 1 : 2)),\n    TimeSent = ((DateTime) this0.last.MessageMetadata[\"TimeSent\"]),\n    ProcessedAt = this0.last.AttemptedAt,\n    ReceivingEndpointName = ((this0.last.MessageMetadata[\"ReceivingEndpoint\"])).Name,\n    CriticalTime = ((TimeSpan ? ) this0.last.MessageMetadata[\"CriticalTime\"]),\n    ProcessingTime = ((TimeSpan ? ) this0.last.MessageMetadata[\"ProcessingTime\"]),\n    DeliveryTime = ((TimeSpan ? ) this0.last.MessageMetadata[\"DeliveryTime\"]),\n    Query = Enumerable.ToArray(DynamicEnumerable.Union(this0.last.MessageMetadata.ToDictionary(e1 => e1.Key, e1 => e1.Value).Select(_ => _.Value.ToString()), new string[] {\n        String.Join(\" \", this0.last.Headers.ToDictionary(e1 => e1.Key, e1 => e1.Value).Select(x => x.Value))\n    })),\n    ConversationId = ((string) this0.last.MessageMetadata[\"ConversationId\"])\n})"],"ClusterState":{"LastStateIndex":0},"Fields":{"Query":{"Analyzer":null,"Indexing":"Search","Spatial":null,"Storage":null,"Suggestions":null,"TermVector":null}},"Configuration":{},"AdditionalSources":{},"AdditionalAssemblies":[]}}